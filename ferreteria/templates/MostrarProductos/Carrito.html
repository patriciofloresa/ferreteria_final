{% extends "base.html" %}
{% load static %}
{% block titulo %} Detalle carrito {% endblock titulo %}
{% block cuerpo %}

{% include 'includes/header.html' %}


<h1 class="container" style="font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">Carrito de compras
</h1>

<table class="table table-dark mt-3 container">
    <thead>
        <tr>
            <th scope="col">Usuario</th>
            <th scope="col">imagen</th>
            <th scope="col">Nombre</th>
            <th scope="col">Precio</th>
            <th scope="col">Cantidad</th>
            <th scope="col">Acciones</th>
            <th>Total</th>
        </tr>
    </thead>
    <tbody>
        {%  for det in carrito.detalles.all %}
        <tr>
            <td>{{request.user}}</td>
            <td><img src="{{det.producto.imagen.url}}" width="50" height="50" alt=""></td>
            <td>{{det.producto.Nombre}}</td>
            <td>{{det.producto.precio}}</td>
            <td>{{det.cantidad}}</td>
            <td>
                <form action="{% url 'prod:removercarrito' det.pk %}" method="POST">
                    {% csrf_token %}
                    <button class="btn btn-danger btn-circle" role="button"><i class="far fa-trash-alt"></i></button>
                </form>
            </td>
            <td><button class="btn btn-warning">{{det.get_precio_parcial}}</button></td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7">
                <div style="margin-top: 50px;">
                    <h1 class="text-center ">No tienes Productos en el carrito <i
                            class="movimiento fas fa-shopping-cart fa-4x container  " style="color: #D3D3D3;"> </i></h1>
                </div>
            </td>
        </tr>


        {% endfor %}
    </tbody>
</table>
<div class="row justify-content-between" >

    <div class="col-4 container" >
        <form  action="{% url 'prod:deleteall' %}" method="POST">{% csrf_token %}
            <button type="submit" class="btn btn-danger">
                <i class="far fa-trash-alt"></i>
                <span>Limpiar Todo</span>
            </button>
        </form>
    </div>
    <div class="col-4">
        <form action="{% url 'cmp:ventanew' %} " method="POST">
            {% csrf_token %}
            <div class="pagocarro" class="card" style="width: 15rem; height: 12rem; margin-right: 180px;  float: right;">
                <div class="card-body ">
                    <h2 class="card-title text-dark" style="text-decoration: underline;">Total a Pagar</h2>
                    <h3 class="card-subtitle mb-2 text-muted">${{carrito.get_total}}</h3>
                    <button class="btn btn-block btn-primary" type="submit"><i
                        class="giro fas fa-money-bill-wave fa-2x"></i></button> 
                </div>
            </div>
        </form>
    </div>
 
</div>
 
<div class="clearfix"></div>

{% if messages  %}
{% for message in messages %}

{% endfor %}
{% endif %}





{% include 'includes/footer.html' %}
{% endblock cuerpo %}